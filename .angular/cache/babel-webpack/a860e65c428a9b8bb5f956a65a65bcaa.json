{"ast":null,"code":"import { environment } from \"src/environments/environment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../states/user.store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../states/app.store\";\nimport * as i4 from \"../../services/legal-entity.service\";\nimport * as i5 from \"src/app/states/locale.store\";\nimport * as i6 from \"../../services/analytics.service\";\nimport * as i7 from \"@cmx-web-components/angular\";\nimport * as i8 from \"../../pipes/translate.pipe\";\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(userStore, router, appStore, legalEntitiesService, localeStore, analytics) {\n      this.userStore = userStore;\n      this.router = router;\n      this.appStore = appStore;\n      this.legalEntitiesService = legalEntitiesService;\n      this.localeStore = localeStore;\n      this.analytics = analytics;\n    }\n\n    ngOnInit() {\n      this.analytics.trigger();\n    }\n\n    mylogin(evt) {\n      if (evt.detail.ok === true) {\n        evt.detail.body.getReader().read().then(stream => {\n          const userAuth = JSON.parse(new TextDecoder(\"utf-8\").decode(stream.value));\n          this.userStore.setUser(userAuth.applications, userAuth.customer, userAuth.customerId, userAuth.profile);\n          this.localeStore.setActiveLanguage(userAuth.country);\n          this.appStore.setTokens(userAuth.jwt, userAuth.oauth2);\n          this.legalEntitiesService.getLegalEntities();\n          this.router.navigate([\"dashboard\"]);\n        });\n      }\n    }\n\n    forgot() {\n      window.open(`https://${environment.host}/forgotPassword`);\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserStore), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.CmxAppStore), i0.ɵɵdirectiveInject(i4.LegalEntityService), i0.ɵɵdirectiveInject(i5.LocaleStore), i0.ɵɵdirectiveInject(i6.AnalyticsService));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 29,\n    vars: 25,\n    consts: [[1, \"login-wrapper\"], [1, \"login-logo-wrap\"], [1, \"login-logo\"], [\"src\", \"./assets/images/cemex_mono_white.svg\", \"alt\", \"cemex logo\", \"width\", \"146\"], [1, \"login-form\"], [1, \"container\"], [1, \"welcome-text-title\"], [1, \"welcome-detail-line\"], [\"id\", \"mainLogin\", 1, \"cmx-login-form\", 3, \"labelUsername\", \"labelUsernamePlaceholder\", \"labelPassword\", \"labelPasswordPlaceholder\", \"labelLoginCTA\", \"labelLoginError\", \"logInButtonWidth\", \"cwcLogin\"], [\"type\", \"header\", \"name\", \"accept-language\", \"value\", \"es_MX\"], [\"type\", \"header\", \"name\", \"app-code\", \"value\", \"DCMWebTool_App\"], [\"type\", \"header\", \"name\", \"Content-Type\", \"value\", \"application/x-www-form-urlencoded\"], [\"type\", \"header\", \"name\", \"x-ibm-client-id\", \"value\", \"ba4ae518-258b-4b29-9d6f-8d77ab1cef7a\"], [\"type\", \"body\", \"name\", \"grant_type\", \"value\", \"password\"], [\"type\", \"body\", \"name\", \"scope\", \"value\", \"security\"], [\"type\", \"body\", \"name\", \"client_id\", \"value\", \"ba4ae518-258b-4b29-9d6f-8d77ab1cef7a\"], [\"type\", \"body\", \"name\", \"app_name\", \"value\", \"DCM\"], [\"slot\", \"ctas\"], [\"variant\", \"link\", 3, \"cwcClick\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"h2\", 6);\n        i0.ɵɵtext(7);\n        i0.ɵɵpipe(8, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"div\", 7);\n        i0.ɵɵelementStart(10, \"cwc-login\", 8);\n        i0.ɵɵlistener(\"cwcLogin\", function LoginComponent_Template_cwc_login_cwcLogin_10_listener($event) {\n          return ctx.mylogin($event);\n        });\n        i0.ɵɵpipe(11, \"translate\");\n        i0.ɵɵpipe(12, \"translate\");\n        i0.ɵɵpipe(13, \"translate\");\n        i0.ɵɵpipe(14, \"translate\");\n        i0.ɵɵpipe(15, \"translate\");\n        i0.ɵɵpipe(16, \"translate\");\n        i0.ɵɵelement(17, \"cwc-login-param\", 9);\n        i0.ɵɵelement(18, \"cwc-login-param\", 10);\n        i0.ɵɵelement(19, \"cwc-login-param\", 11);\n        i0.ɵɵelement(20, \"cwc-login-param\", 12);\n        i0.ɵɵelement(21, \"cwc-login-param\", 13);\n        i0.ɵɵelement(22, \"cwc-login-param\", 14);\n        i0.ɵɵelement(23, \"cwc-login-param\", 15);\n        i0.ɵɵelement(24, \"cwc-login-param\", 16);\n        i0.ɵɵelementStart(25, \"div\", 17);\n        i0.ɵɵelementStart(26, \"cwc-button\", 18);\n        i0.ɵɵlistener(\"cwcClick\", function LoginComponent_Template_cwc_button_cwcClick_26_listener() {\n          return ctx.forgot();\n        });\n        i0.ɵɵtext(27);\n        i0.ɵɵpipe(28, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 9, \"views.login.welcome\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"labelUsername\", i0.ɵɵpipeBind1(11, 11, \"views.login.username\"));\n        i0.ɵɵpropertyInterpolate(\"labelUsernamePlaceholder\", i0.ɵɵpipeBind1(12, 13, \"views.login.username\"));\n        i0.ɵɵpropertyInterpolate(\"labelPassword\", i0.ɵɵpipeBind1(13, 15, \"views.login.password\"));\n        i0.ɵɵpropertyInterpolate(\"labelPasswordPlaceholder\", i0.ɵɵpipeBind1(14, 17, \"views.login.password\"));\n        i0.ɵɵpropertyInterpolate(\"labelLoginCTA\", i0.ɵɵpipeBind1(15, 19, \"views.login.loginButton\"));\n        i0.ɵɵpropertyInterpolate(\"labelLoginError\", i0.ɵɵpipeBind1(16, 21, \"views.login.error\"));\n        i0.ɵɵpropertyInterpolate(\"logInButtonWidth\", \"-webkit-fill-available\");\n        i0.ɵɵadvance(17);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(28, 23, \"views.login.forgotPassword\"));\n      }\n    },\n    directives: [i7.CwcLogin, i7.CwcLoginParam, i7.CwcButton],\n    pipes: [i8.TranslatePipe],\n    styles: [\".login-wrapper[_ngcontent-%COMP%]{display:flex;height:100vh}.login-logo-wrap[_ngcontent-%COMP%]{background:#002A59;width:40%;height:100vh;display:flex}.login-logo[_ngcontent-%COMP%]{margin:auto}.login-form[_ngcontent-%COMP%]{width:60%;align-self:center}.bar-highlight[_ngcontent-%COMP%]{height:2px;width:100%;background-color:#ee3d42}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}